<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lets.platform.customize.service.dao.CollDeviceItemRealtimeMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.lets.platform.model.collection.entity.CollDeviceItemRealtime">
        <id column="id" property="id" />
        <result column="device_id" property="deviceId" />
        <result column="item_key" property="itemKey" />
        <result column="create_time" property="createTime" />
        <result column="create_user" property="createUser" />
        <result column="create_user_name" property="createUserName" />
        <result column="update_time" property="updateTime" />
        <result column="update_user" property="updateUser" />
        <result column="update_user_name" property="updateUserName" />
        <result column="tenancy_id" property="tenancyId" />
        <result column="item_value" property="itemValue" />
        <result column="collection_time" property="collectionTime" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        create_time,
        create_user,
        create_user_name,
        update_time,
        update_user,
        update_user_name,
        tenancy_id,
        id, device_id, item_key, item_value, collection_time
    </sql>

    <insert id="replaceItemValue4OldParam" parameterType="list">
        <foreach collection="list" item="one" separator=";" index="index">
            insert into coll_device_item_realtime
            (id,
            device_id,
            item_key,
            item_value,
            collection_time,
            create_time,
            create_user,
            create_user_name,
            update_time,
            update_user,
            update_user_name,
            tenancy_id)
            values
            (#{one.id},
            #{one.deviceId},
            #{one.itemKey},
            #{one.itemValue},
            #{one.collectionTime},
            #{one.createTime},
            #{one.createUser},
            #{one.createUserName},
            #{one.updateTime},
            #{one.updateUser},
            #{one.updateUserName},
            #{one.tenancyId})
            on duplicate key update
            item_value = VALUES(item_value),
            collection_time = VALUES(collection_time),
            update_time = VALUES(update_time)
        </foreach>
    </insert>

    <insert id="batSave" parameterType="list">
        insert into coll_device_item_realtime
        (id,
        device_id,
        item_key,
        item_value,
        collection_time,
        create_time,
        create_user,
        create_user_name,
        update_time,
        update_user,
        update_user_name,
        tenancy_id)
        values
        <foreach collection="list" item="one" separator=",">
            (#{one.id},
            #{one.deviceId},
            #{one.itemKey},
            #{one.itemValue},
            #{one.collectionTime},
            #{one.createTime},
            #{one.createUser},
            #{one.createUserName},
            #{one.updateTime},
            #{one.updateUser},
            #{one.updateUserName},
            #{one.tenancyId})
        </foreach>
    </insert>

    <update id="batUpdate" parameterType="list">
        <foreach collection="list" item="one" separator=";">
            update coll_device_item_realtime
            set
            item_value = #{one.itemValue},
            collection_time = #{one.collectionTime},
            update_time = #{one.updateTime}
            where id = #{one.id}
        </foreach>
    </update>

</mapper>
